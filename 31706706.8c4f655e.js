(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{104:function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return j}));var r=t(0),a=t.n(r);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var o=a.a.createContext({}),b=function(e){var n=a.a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},i=function(e){var n=b(e.components);return a.a.createElement(o.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},d=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,c=e.originalType,s=e.parentName,o=p(e,["components","mdxType","originalType","parentName"]),i=b(t),d=r,j=i["".concat(s,".").concat(d)]||i[d]||u[d]||c;return t?a.a.createElement(j,l(l({ref:n},o),{},{components:t})):a.a.createElement(j,l({ref:n},o))}));function j(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var c=t.length,s=new Array(c);s[0]=d;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,s[1]=l;for(var o=2;o<c;o++)s[o]=t[o];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},76:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return s})),t.d(n,"metadata",(function(){return l})),t.d(n,"toc",(function(){return p})),t.d(n,"default",(function(){return b}));var r=t(3),a=t(7),c=(t(0),t(104)),s={id:"webpack",title:"\u4f7f\u7528webpack"},l={unversionedId:"javascript/webpack",id:"javascript/webpack",isDocsHomePage:!1,title:"\u4f7f\u7528webpack",description:"webpack \u662f\u4e00\u4e2a\u73b0\u4ee3 JavaScript \u5e94\u7528\u7a0b\u5e8f\u7684\u9759\u6001\u6a21\u5757\u6253\u5305\u5668(module bundler)\u3002\u5f53 webpack \u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u5b83\u4f1a\u9012\u5f52\u5730\u6784\u5efa\u4e00\u4e2a\u4f9d\u8d56\u5173\u7cfb\u56fe(dependency graph)\uff0c\u5176\u4e2d\u5305\u542b\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u7684\u6bcf\u4e2a\u6a21\u5757\uff0c\u7136\u540e\u5c06\u6240\u6709\u8fd9\u4e9b\u6a21\u5757\u6253\u5305\u6210\u4e00\u4e2a\u6216\u591a\u4e2a bundle",source:"@site/docs\\javascript\\webpack.md",slug:"/javascript/webpack",permalink:"/docs/javascript/webpack",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/javascript/webpack.md",version:"current",sidebar:"someSidebar",previous:{title:"\u4f7f\u7528moment\u683c\u5f0f\u5316\u65f6\u95f4",permalink:"/docs/javascript/moment"},next:{title:"\u8bbe\u8ba1\u6a21\u5f0f",permalink:"/docs/javascript/design"}},p=[{value:"\u57fa\u7840\u7bc7",id:"\u57fa\u7840\u7bc7",children:[]},{value:"\u914d\u7f6e\u7bc7",id:"\u914d\u7f6e\u7bc7",children:[]}],o={toc:p};function b(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(c.b)("wrapper",Object(r.a)({},o,t,{components:n,mdxType:"MDXLayout"}),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"webpack \u662f\u4e00\u4e2a\u73b0\u4ee3 JavaScript \u5e94\u7528\u7a0b\u5e8f\u7684\u9759\u6001\u6a21\u5757\u6253\u5305\u5668(module bundler)\u3002\u5f53 webpack \u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u5b83\u4f1a\u9012\u5f52\u5730\u6784\u5efa\u4e00\u4e2a\u4f9d\u8d56\u5173\u7cfb\u56fe(dependency graph)\uff0c\u5176\u4e2d\u5305\u542b\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u7684\u6bcf\u4e2a\u6a21\u5757\uff0c\u7136\u540e\u5c06\u6240\u6709\u8fd9\u4e9b\u6a21\u5757\u6253\u5305\u6210\u4e00\u4e2a\u6216\u591a\u4e2a bundle")),Object(c.b)("h3",{id:"\u57fa\u7840\u7bc7"},"\u57fa\u7840\u7bc7"),Object(c.b)("h4",{id:"\u5b89\u88c5-webpack"},"\u5b89\u88c5 webpack"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"yarn add webpack webpack-cli -D\n")),Object(c.b)("h4",{id:"\u914d\u7f6e-webpack"},"\u914d\u7f6e webpack"),Object(c.b)("p",null,"webpack4 \u652f\u6301 0 \u914d\u7f6e\uff0c\u53ef\u4e0d\u5f15\u5165\u914d\u7f6e\u6587\u4ef6\uff0c\u4f46\u8981\u6309\u7167 webpack \u89c4\u8303\u76ee\u5f55\u5f00\u53d1\uff0c\u6709\u5c40\u9650\u6027\uff0c\u5927\u591a\u662f\u9700\u8981\u624b\u52a8\u8bbe\u7f6e\uff0c\u5728\u6839\u76ee\u5f55\u65b0\u5efa\u4e00\u4e2a webpack.config.js \u6216 webpackfile.js\uff0c\u540c\u6211\u4e00\u8d77\u4e00\u6b65\u4e00\u6b65\u5199\u5165\u914d\u7f6e\uff0c\u4ece\u6b64\u8d70\u5411\u4eba\u751f\u5dc5\u5cf0\uff01"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"// \u76ee\u5f55 webpack.config.js\n\n// webpack \u662f\u57fa\u4e8enode\u5b9e\u73b0\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528node\u81ea\u5e26\u7684\u4e00\u4e9b\u6a21\u5757\nlet path = requore('path');\n\nmodule.exports = {\n  // \u6253\u5305\u6a21\u5f0f \u4e24\u79cd\u6a21\u5f0f:development\u548cproduction,\u9ed8\u8ba4\u662fproduction\n  mode: 'development',\n  // \u5165\u53e3\u6587\u4ef6\n  entry: './src/index.js',\n  // \u6253\u5305\u5b8c\u6210\u540e\u8f93\u51fa\u6587\u4ef6\u4f4d\u7f6e\u548c\u6587\u4ef6\u540d\u914d\u7f6e\n  output: {\n    // \u6253\u5305\u540e\u6587\u4ef6\u540d,\u52a0hash\u89e3\u51b3\u7f13\u5b58\u95ee\u9898,hash\u6233\u592a\u957f\u53ef\u8bbe\u7f6e8\u4f4d\n    filename: 'bundle.[hash:8].js',\n    // \u8def\u5f84\u5fc5\u987b\u662f\u7edd\u5bf9\u8def\u5f84\n    path: path.resolve(__dirname, 'dist'),\n  }\n}\n")),Object(c.b)("h4",{id:"\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u540d\u79f0"},"\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u540d\u79f0"),Object(c.b)("p",null,"\u6709\u65f6\u5019\u6211\u4eec\u53ef\u80fd\u5b9a\u4e49\u591a\u4e2a config \u6bd4\u5982\u5f00\u53d1\u73af\u5883\u548c\u751f\u4ea7\u73af\u5883\u5bf9\u914d\u7f6e\uff0c\u8fd9\u65f6\u8981\u5728 package.json \u76ee\u5f55\u4e0b scripts \u5185\u914d\u7f6e"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'// \u76ee\u5f55 package.json\n\n// --config  \u540e\u9762\u8ddf\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\n"scripts": {\n  "build": "webpack --config webpack.config.production.js",\n}\n')),Object(c.b)("h4",{id:"\u5f00\u53d1\u670d\u52a1\u5668\u914d\u7f6e"},"\u5f00\u53d1\u670d\u52a1\u5668\u914d\u7f6e"),Object(c.b)("p",null,"\u5728\u5f00\u53d1\u73af\u5883\u6211\u4eec\u9700\u8981\u542f\u52a8\u4e00\u4e2a\u672c\u5730\u670d\u52a1\uff0c\u5b89\u88c5 webpack-dev-server \u63d2\u4ef6"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'yarn add webpack-dev-server -D\n\n\n// \u4fee\u6539package.json\u4e0b\u5bf9dev\u542f\u52a8\u914d\u7f6e\n"scripts": {\n  "dev": "webpack-dev-server --config webpack.config.production.js",\n}\n\n// \u5728webpack.config.js\u5185\u6dfb\u52a0\u5bf9devServer\u914d\u7f6e\n\nmodule.exports = {\n  devServer: {\n    // \u7aef\u53e3\u53f7\n    port: 3000,\n    // \u663e\u793a\u6253\u5305\u8fdb\u5ea6\n    progress: true,\n    // \u9759\u6001\u670d\u52a1\u76ee\u5f55\n    contentBase: \'./dist\',\n    // \u81ea\u52a8\u6253\u5f00\u6d4f\u89c8\u5668\n    open: true,\n    // \u542f\u52a8gzip\u538b\u7f29\n    compress: true,\n  },\n  ...\n}\n')),Object(c.b)("h4",{id:"\u751f\u6210-html-\u6a21\u7248\u914d\u7f6e"},"\u751f\u6210 html \u6a21\u7248\u914d\u7f6e"),Object(c.b)("p",null,"\u628a\u9879\u76ee\u4e2d js/css/img \u6253\u5305\u5230 index.html \u5185\uff0c\u5f15\u5165\u63d2\u4ef6 html-webpack-plugin"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"yarn add html-webpack-plugin -D\n")),Object(c.b)("p",null,"\u5728 webpack.config.js \u4e2d plugins \u4e2d\u914d\u7f6e"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"\u76ee\u5f55 webpack.config.js\n\nlet HtmlWebpackPlugin = require('html-webpack-plugin');\n\nmodule.exports = {\n  plugins: [\n    new HtmlWebpackPlugin({\n      // \u9879\u76ee\u4e2d\u5bf9\u6a21\u7248html\n      template: './src/index.html',\n      // \u6253\u5305\u540e\u7684\u6587\u4ef6\u540d\n      filename: 'index.html',\n      // \u538b\u7f29html\u914d\u7f6e\n      minify: {\n        // \u5220\u9664\u5c5e\u6027\u4e2d\u53cc\u5f15\u53f7\n        removeAttributeQuotes: true,\n        // \u6298\u53e0\u7a7a\u884c\n        collapseWhitespace: true,\n      },\n      // \u6253\u5305\u540e\u7684\u6587\u4ef6\u5e26hash\u6233 \u4f8b\u5982\uff1avender.js?5c5c0e9b436ca75794a,\u9879\u76ee\u4e2d\u4e0d\u5efa\u8bae\u5f00\u542f\n      hash: true\n    })\n  ],\n  ...\n}\n")),Object(c.b)("h4",{id:"csslesssass-\u6837\u5f0f\u5904\u7406"},"css/less/sass \u6837\u5f0f\u5904\u7406"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"\u5904\u7406 css \u6587\u4ef6,\u63a5\u7eed@import \u8bed\u6cd5\uff0c\u4f7f\u7528 css-loader"),Object(c.b)("li",{parentName:"ul"},"\u628a css \u63d2\u5165\u5230 head \u6807\u7b7e\u5185\u4f7f\u7528 style-loader\uff0c\u7f3a\u70b9\u628a\u6837\u5f0f\u6253\u5165 head \u6807\u7b7e\u5185\uff0c\u5982\u6837\u5f0f\u592a\u591a\u9020\u6210\u963b\u585e"),Object(c.b)("li",{parentName:"ul"},"\u62bd\u79bb css \u6587\u4ef6 \u4f7f\u7528 mini-css-extract-plugin"),Object(c.b)("li",{parentName:"ul"},"\u81ea\u52a8\u52a0\u524d\u7f00\u517c\u5bb9\u5404\u79cd\u6d4f\u89c8\u5668 postcss-loader autoprefixer"),Object(c.b)("li",{parentName:"ul"},"\u5904\u7406 less \u6587\u4ef6\u4f7f\u7528 less less-loader"),Object(c.b)("li",{parentName:"ul"},"\u5904\u7406 sass \u6587\u4ef6\u4f7f\u7528 node-sass sass-loader"),Object(c.b)("li",{parentName:"ul"},"\u538b\u7f29 css \u6587\u4ef6\u4f7f\u7528 optimize-css-assest-webpack-plugin")),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},Object(c.b)("inlineCode",{parentName:"p"},"loader")," \u7684\u6267\u884c\u987a\u5e8f\uff0c\u4ece\u53f3\u5f80\u5de6\u6267\u884c\uff0c\u4ece\u4e0b\u5411\u4e0a\u6267\u884c")),Object(c.b)("p",null,"\u5b89\u88c5",Object(c.b)("inlineCode",{parentName:"p"},"loader")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"yarn add css-loader style-loader less less-loader mini-css-extract-plugin postcss-loader autoprefixer optimize-css-assest-webpack-plugin -D\n")),Object(c.b)("p",null,"\u5728 webpack.config.js \u4e2d module \u4e0b\u8fdb\u884c loader \u914d\u7f6e"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"// webpack.config.js\n\nlet MiniCssExtractPlugin = require('mini-css-extract-plugin');\nlet OptimizeCssAssestsPlugin = require('optimize-css-assest-webpack-plugin');\nlet UgifyJsPlugin = require('uglifyjs-webpack-plugin');\nmodule.exports = {\n  // \u4f18\u5316\u9879\n  optimization: {\n    minimizer: [\n      // \u538b\u7f29js\n      new UgifyJsPlugin({\n        // \u662f\u5426\u4f7f\u7528\u7f13\u5b58\n        catch: true,\n        // \u662f\u5426\u91c7\u7528\u591a\u8fdb\u7a0b\u6253\u5305\n        parallel: true,\n        // \b\u538b\u7f29\u5b8cjs\u4ea7\u751f\u6e90\u7801\u6620\u5c04\uff0c\u65b9\u4fbf\u8c03\u8bd5\n        sourceMap: true\n      })\n      // \u538b\u7f29css\n      new OptimizeCssAssestsPlugin()\n    ]\n  },\n  // \u6a21\u5757\n  module: {\n    // \u89c4\u5219\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [\n          // \u62bd\u79bb\u6210css\u6587\u4ef6\n          MiniCssExtractPlugin.loader,\n          'css-loader',\n          // \u5148\u52a0\u524d\u7f00\uff0c\u540e\u4f7f\u7528css-loader\u5904\u7406\n          'postcss-loader',\n        ]\n      },\n      {\n        test: /\\.less$/,\n        use: [\n          // {\n            // loader: 'style-loader',\n            // options: {\n              // \u63d2\u5165head\u6807\u7b7e\u9876\u90e8\n              // insertAt: 'top\n            // }\n          // },\n           // \u62bd\u79bb\u6210css\u6587\u4ef6\n          MiniCssExtractPlugin.loader,\n          // \u89e3\u6790\u8def\u5f84\uff0c\u5904\u7406@import\u8bed\u6cd5\n          'css-loader',\n          // \u5148\u52a0\u524d\u7f00\uff0c\u540e\u4f7f\u7528css-loader\u5904\u7406\n          'postcss-loader',\n          // less-loader\u8c03\u7528less\u8fdb\u884c\u8f6c\u5316\n          'less-loader'\n        ]\n      },\n    ],\n    plugins: [\n      new MiniCssExtractPlugin({\n        filename: 'main.css'\n      }),\n    ]\n    ...\n  }\n}\n")),Object(c.b)("h4",{id:"js-\u5904\u7406"},"js \u5904\u7406"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"// \u8f6c\u5316 es6 \u8bed\u6cd5\nfn =()=> {\n  console.log(111)\n};\nfn();\n")),Object(c.b)("p",null,"\u5b89\u88c5\u63d2\u4ef6"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"yarn add babel-loader @babel/core @babel/preset-env -D\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"module: {\n  rules:[\n    {\n      test: /\\.js$/,\n      use: {\n        loader: 'babel-loader',\n        // \u7528babel-loader\u9700\u8981\u628aes6\u8f6c\u5316es5\n        options: {\n          presets: ['@babel/preset-env']\n        }\n      },\n      plugins: [\n        ['@babel/plugin-proposal-decorators'],\n        ['@babel/plugin-proposal-class-properties'],\n        '@babel/plugin-transform-runtime'\n      ]\n    }\n  ]\n}\n")),Object(c.b)("h4",{id:"eslint-\u8bed\u6cd5\u6821\u9a8c"},"eslint \u8bed\u6cd5\u6821\u9a8c"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"module: {\n  rules:[\n    {\n      test: /\\.js$/,\n      use: {\n        loader: 'eslint-loader',\n        options: {\n          // \u5f3a\u5236\u5728\u5904\u7406js\u524d\u6267\u884c \uff0c\u4e4b\u540e\u6267\u884cpost\n          enforce: 'pre'\n        }\n      }\n    }\n  ]\n}\n")),Object(c.b)("h4",{id:"\u7b2c\u4e09\u65b9\u6a21\u5757\u4f7f\u7528"},"\u7b2c\u4e09\u65b9\u6a21\u5757\u4f7f\u7528"),Object(c.b)("p",null,"\u4f7f\u7528 jquery"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"plugins: [\n  //\u5728\u6bcf\u4e2a\u6a21\u5757\u6ce8\u5165$\n  new webpack.ProvidePlugin({\n    jquery: '$',\n  })\n],\n// \u5f15\u5165cdn\u4e0d\u5e0c\u671b\u6253\u5305\nexternals: {\n  jquery: '$'\n}\n")),Object(c.b)("h4",{id:"\u56fe\u7247\u5904\u7406"},"\u56fe\u7247\u5904\u7406"),Object(c.b)("p",null,"\u5b89\u88c5\u63d2\u4ef6"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"yarn add url-loade -D\n")),Object(c.b)("p",null,"\u914d\u7f6e\u89c4\u5219"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'{\n  test: /\\.(png|jpg|gif)/,\n    use: {\n      loader: {\n        // \u505a\u4e00\u4e2a\u9650\u5236 \u5c0f\u4e8e\u591a\u5c11k\u7528base64\u8f6c\u6362\n        loader: "url-loader",\n        options: {\n          //\u5c0f\u4e8e200k \u4f7f\u7528base64\n          limit: 200 * 1024,\n          //\u8f93\u51fa\u8def\u5f84\n          outputPath: "img",\n          //\u56fe\u7247\u6307\u5b9a\u8def\u5f84\uff0c\u4f8b\u5982\u653e\u5165cdn\n          publicPath: "",\n        },\n      },\n    },\n},\n')),Object(c.b)("h3",{id:"\u914d\u7f6e\u7bc7"},"\u914d\u7f6e\u7bc7"),Object(c.b)("p",null,"\u3002\u3002\u3002"))}b.isMDXComponent=!0}}]);