<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ç‹å¿—åˆšçš„åšå®¢ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ç‹å¿—åˆšçš„åšå®¢ Blog Atom Feed"><title data-react-helmet="true">è®¾è®¡æ¨¡å¼ | ç‹å¿—åˆšçš„åšå®¢</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="è®¾è®¡æ¨¡å¼ | ç‹å¿—åˆšçš„åšå®¢"><meta data-react-helmet="true" name="description" content="åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè®¾è®¡æ¨¡å¼ï¼ˆdesign patternï¼‰æ˜¯å¯¹è½¯ä»¶è®¾è®¡ä¸­æ™®éå­˜åœ¨ï¼ˆåå¤å‡ºç°ï¼‰çš„å„ç§é—®é¢˜ï¼Œæ‰€æå‡ºçš„è§£å†³æ–¹æ¡ˆã€‚ â€”â€”ç»´åŸºç™¾ç§‘"><meta data-react-helmet="true" property="og:description" content="åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè®¾è®¡æ¨¡å¼ï¼ˆdesign patternï¼‰æ˜¯å¯¹è½¯ä»¶è®¾è®¡ä¸­æ™®éå­˜åœ¨ï¼ˆåå¤å‡ºç°ï¼‰çš„å„ç§é—®é¢˜ï¼Œæ‰€æå‡ºçš„è§£å†³æ–¹æ¡ˆã€‚ â€”â€”ç»´åŸºç™¾ç§‘"><meta data-react-helmet="true" property="og:url" content="https://wangzg0.github.io/docs/javascript/design"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wangzg0.github.io/docs/javascript/design"><link rel="stylesheet" href="/styles.c025bdb8.css">
<link rel="preload" href="/styles.2e3526c0.js" as="script">
<link rel="preload" href="/runtime~main.b2ec19b9.js" as="script">
<link rel="preload" href="/main.47aef0ab.js" as="script">
<link rel="preload" href="/1.043bfae5.js" as="script">
<link rel="preload" href="/2.43a1a627.js" as="script">
<link rel="preload" href="/33.bd4e36e7.js" as="script">
<link rel="preload" href="/34.9a26ead1.js" as="script">
<link rel="preload" href="/f976f453.2cdaa488.js" as="script">
<link rel="preload" href="/17896441.e2a3b6ae.js" as="script">
<link rel="preload" href="/101703e8.5bca6b43.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><strong class="navbar__title">  ä¸»é¡µ</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/javascript/es6">ç¬”è®°</a><a class="navbar__item navbar__link" href="/blog">çŸ¥è¯†åº“</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wangzg0" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Github</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">  ä¸»é¡µ</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/javascript/es6">ç¬”è®°</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">çŸ¥è¯†åº“</a></li><li class="menu__list-item"><a href="https://github.com/wangzg0" target="_blank" rel="noopener noreferrer" class="menu__link">Github</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">JavaScript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/javascript/es6">ESNext æ–°ç‰¹æ€§</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/javascript/async">jså¼‚æ­¥ç¼–ç¨‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/javascript/func">å‡½æ•°å¼ç¼–ç¨‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/javascript/v8">æµè§ˆå™¨ V8 å¼•æ“ GC ç®—æ³•åŸç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/javascript/moment">ä½¿ç”¨momentæ ¼å¼åŒ–æ—¶é—´</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/javascript/webpack">ä½¿ç”¨webpack</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/javascript/design">è®¾è®¡æ¨¡å¼</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">TypeScript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/typescript/ts">Typescriptä½¿ç”¨æ€»ç»“</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">HTML5</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/html5/qa">æµè§ˆå™¨å¸¸è§é—®é¢˜</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/html5/css">CSS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/html5/scroll">è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/html5/bfc">BFCç†è§£ä¸åº”ç”¨</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">å·¥ä½œä¸­çš„é—®é¢˜</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/worker/worker_reg_exp">å¼€å‘ä¸­å¸¸ç”¨çš„æ­£åˆ™è¡¨å•æ ¡éªŒ</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">æ¡†æ¶å­¦ä¹ </a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/frame/vue2">vue2 ç¬”è®°</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/frame/vue3">vue3.xå­¦ä¹ </a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">sql</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/tb_action">æ•°æ®åº“æ“ä½œ</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_2WRA"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_CoMu"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">è®¾è®¡æ¨¡å¼</h1></header><div class="markdown"><blockquote><p>åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè®¾è®¡æ¨¡å¼ï¼ˆdesign patternï¼‰æ˜¯å¯¹è½¯ä»¶è®¾è®¡ä¸­æ™®éå­˜åœ¨ï¼ˆåå¤å‡ºç°ï¼‰çš„å„ç§é—®é¢˜ï¼Œæ‰€æå‡ºçš„è§£å†³æ–¹æ¡ˆã€‚ â€”â€”ç»´åŸºç™¾ç§‘</p></blockquote><p>æœ€è¿‘æ‹œè¯»äº†æ·˜ç³»å‰ç«¯å¤§ç¥ä¿®è¨€å¤§ä½¬çš„ã€ŠJavaScript è®¾è®¡æ¨¡å¼æ ¸â¼¼åŸç†ä¸åº”â½¤å®è·µã€‹ï¼Œè®©æˆ‘å—ç›ŠåŒªæµ…ï¼Œä¸€ç›´æ²‰æµ¸åœ¨ä¸šåŠ¡ä¸Šé‡å¤é€ è½®å­çš„è°ƒåŒ…è™¾ï¼Œæ¯å¤©æ„Ÿè§‰å·¥ä½œæ»¡æ»¡ï¼Œä½†æ˜¯æœªæ›¾æ„Ÿè§‰è‡ªå·±åœ¨è¿›æ­¥ï¼Œæ­¤æ–‡å‚ç…§è¯¥æ–‡ç« è¿›è¡Œäº†äºŒæ¬¡æ¶ˆåŒ–å¹¶è®°å½•ä¸‹æ¥ï¼Œå¸®åŠ©è‡ªå·±å’Œæœ‰åŒæ ·æƒ…å†µçš„åŒå­¦ä¸æ–­åŠ æ·±å¯¹è®¾è®¡æ¨¡å¼çš„ç†è§£ï¼Œå¹¶è¿ç”¨åˆ°æ—¥å¸¸å·¥ä½œä¸­</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="åˆ›å»ºå‹---æ„é€ å™¨æ¨¡å¼"></a>åˆ›å»ºå‹ - æ„é€ å™¨æ¨¡å¼<a class="hash-link" href="#åˆ›å»ºå‹---æ„é€ å™¨æ¨¡å¼" title="Direct link to heading">#</a></h3><p>åœ¨<code>JavaScript</code>ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ„é€ å‡½æ•°å»åˆå§‹åŒ–å¯¹è±¡ï¼Œå°±æ˜¯åº”ç”¨äº†æ„é€ å™¨æ¨¡å¼ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// å‡å¦‚ä½ æ˜¯Riotå…¬å¸çš„ä¸€åç¨‹åºå‘˜ï¼Œé¢†å¯¼è®©ä½ ä½¿ç”¨jsé‡æ–°å¼€å‘lolè¿™æ¬¾æ¸¸æˆ</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// é¦–å…ˆåˆ›å»ºä¸€åè‹±é›„åˆ°ç³»ç»Ÿå†…</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const Aixi = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: &#x27;è‰¾å¸Œ&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  title: &#x27;å¯’å†°å°„æ‰‹&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  role: &#x27;å°„æ‰‹&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// åˆ›å»ºç¬¬äºŒåè‹±é›„</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const Zhaoxin = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: &#x27;èµµä¿¡&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  title: &#x27;å¾·é‚¦æ€»ç®¡&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  role: &#x27;æˆ˜å£«&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æƒ³æƒ³è¿˜æœ‰100å¤šåè‹±é›„æ²¡åˆ›å»ºå‘¢ï¼Œè¦åŠ ç­åˆ°æ·±å¤œå‘€ï¼Œäºæ˜¯å†™ä¸ªæ„é€ å‡½æ•°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function Hero(name, title, role) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.name = name;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.title = title;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.role = role;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// åˆ›å»ºè‹±é›„å°±newä¸€ä¸‹å°±æå®šäº†</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const Jiakesi = new Hero(&#x27;è´¾å…‹æ–¯&#x27;, &#x27;æ­¦å™¨å¤§å¸ˆ&#x27;, &#x27;æˆ˜å£«&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const Yidashi = new Hero(&#x27;æ˜“å¤§å¸ˆ&#x27;, &#x27;æ— æå‰‘åœ£&#x27;, &#x27;åˆºå®¢&#x27;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>æ„é€ å™¨å°†<code>nameã€titleã€role</code>èµ‹å€¼ç»™å¯¹è±¡çš„è¿‡ç¨‹å°è£…ï¼Œç¡®ä¿äº†æ¯ä¸ªå¯¹è±¡éƒ½å…·å¤‡è¿™äº›å±æ€§ï¼Œç¡®ä¿äº†å…±æ€§çš„ä¸å˜ï¼ŒåŒæ—¶å°† <code>nameã€titleã€role</code>å„è‡ªçš„å–å€¼æ“ä½œå¼€æ”¾ï¼Œç¡®ä¿äº†ä¸ªæ€§çš„çµæ´»</p><p>å¦‚æœåœ¨ä½¿ç”¨æ„é€ å™¨æ¨¡å¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ¬è´¨ä¸Šæ˜¯å»æŠ½è±¡äº†æ¯ä¸ªå¯¹è±¡å®ä¾‹çš„å˜ä¸ä¸å˜ã€‚é‚£ä¹ˆä½¿ç”¨å·¥å‚æ¨¡å¼æ—¶ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯å»æŠ½è±¡ä¸åŒæ„é€ å‡½æ•°ï¼ˆç±»ï¼‰ä¹‹é—´çš„å˜ä¸ä¸å˜</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="åˆ›å»ºå‹---ç®€å•å·¥å‚æ¨¡å¼"></a>åˆ›å»ºå‹ - ç®€å•å·¥å‚æ¨¡å¼<a class="hash-link" href="#åˆ›å»ºå‹---ç®€å•å·¥å‚æ¨¡å¼" title="Direct link to heading">#</a></h3><p>äº§å“ç»ç†æåˆ°ä¸åŒçš„è‹±é›„ç±»å‹æœ‰ä¸åŒçš„ç‰¹æ€§ï¼Œæ¯”å¦‚å°„æ‰‹çš„æ™®æ”»è·ç¦»æ˜¯ <code>500</code> ç ï¼Œæˆ˜å£«æ˜¯ <code>125</code> ç </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼ŒæŠŠHeroæ‹†æˆä¸¤ä¸ªç±»åˆ«Shorterå’ŒLonger</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function Longer(name, title, role) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.name = name;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.title = title;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.role = &#x27;å°„æ‰‹&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.attackDistance = 500;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function Shorter(name, title, role) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.name = name;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.title = title;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.role = &#x27;æˆ˜å£«&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.attackDistance = 125;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// é€šè¿‡ä¸€ä¸ªå‡½æ•°åˆ¤æ–­è‹±é›„è§’è‰²æ¥ä½¿ç”¨ä¸åŒæ„é€ å™¨</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function handleRole(name, title, role) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  switch (role) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case: &#x27;å°„æ‰‹&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return new Longer(name, title, role);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case: &#x27;æˆ˜å£«&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return new Shorter(name, title, role);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æˆ‘ä»¬å¯ä»¥è¿™æ ·åˆ›å»ºäº†</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const Jiakesi = new handleRole(&#x27;è´¾å…‹æ–¯&#x27;, &#x27;æ­¦å™¨å¤§å¸ˆ&#x27;, &#x27;æˆ˜å£«&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const Aixi = new handleRole(&#x27;è‰¾å¸Œ&#x27;, &#x27;å¯’å†°å°„æ‰‹&#x27;, &#x27;å°„æ‰‹&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// ä¸ºäº†å°†å…±æ€§å°è£…åœ°æ›´å½»åº•ï¼Œä¹Ÿä¸ºäº†å°†å…±æ€§ä¸ä¸ªæ€§åˆ†ç¦»åœ°æ›´å½»åº•ï¼Œæˆ‘å¯ä»¥å†æŠŠä»–ä»¬æ•´åˆå›Hero</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function Hero(name, title, role, attackDistance) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.name = name;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.title = title;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.role = role;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.attackDistance = attackDistance;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// ç„¶åå†™ä¸€ä¸ªç”Ÿæˆè‹±é›„çš„å‡½æ•°ï¼Œå› ä¸ºè‹±é›„ä»¬å°±åƒæ˜¯ä»æµæ°´çº¿ä¸Šç”Ÿäº§çš„äº§å“ï¼Œæ‰€ä»¥ç»™è¿™ä¸ªå‡½æ•°å–åä¸ºâ€œè‹±é›„å·¥å‚â€</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function HeroFactory(name, title, role) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let attackDistance;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  switch (role) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case &quot;å°„æ‰‹&quot;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      attackDistance = 500;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case &quot;åˆºå®¢&quot;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      attackDistance = 125;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return new Hero(name, title, role, speciality);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const Jiakesi = new HeroFactory(&#x27;è´¾å…‹æ–¯&#x27;, &#x27;æ­¦å™¨å¤§å¸ˆ&#x27;, &#x27;æˆ˜å£«&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const Aixi = new HeroFactory(&#x27;è‰¾å¸Œ&#x27;, &#x27;å¯’å†°å°„æ‰‹&#x27;, &#x27;å°„æ‰‹&#x27;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="åˆ›å»ºå‹---æŠ½è±¡å·¥å‚æ¨¡å¼"></a>åˆ›å»ºå‹ - æŠ½è±¡å·¥å‚æ¨¡å¼<a class="hash-link" href="#åˆ›å»ºå‹---æŠ½è±¡å·¥å‚æ¨¡å¼" title="Direct link to heading">#</a></h3><p>æŠ½è±¡å·¥å‚æ¨¡å¼çš„å®šä¹‰ï¼Œæ˜¯å›´ç»•ä¸€ä¸ªè¶…çº§å·¥å‚åˆ›å»ºå…¶ä»–å·¥å‚ï¼ŒæŠ½è±¡å·¥å‚æ˜¯ä½è¯â€œå¼€æ”¾å°é—­åŸåˆ™â€çš„è‰¯å¥½ç´ æ</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æ¥ä¸‹æ¥å°±æ˜¯å¼€ä¸€æŠŠæ¸¸æˆäº†ï¼Œå»ºç«‹ä¸€ç§æ¸¸æˆæ¨¡å¼éœ€è¦æ¸¸æˆç±»å‹ã€åœ°å›¾ã€æ¸¸æˆæœºåˆ¶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function Mode(type, map, mechanism) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.type = type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.map = map;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.mechanism = mechanism;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æ¨¡ä»¿è‹±é›„å·¥å‚åˆ›å»ºæœ‰ä¸ªæ¸¸æˆå·¥å‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function GameFactory(type) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let map;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let mechanism;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  switch (type) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case &#x27;æ™®é€šåŒ¹é…&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      map = &#x27;æ™®é€šæ¨¡å¼&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      mechanism = &#x27;æ™®é€šæœºåˆ¶&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case &#x27;å…‹éš†æ¨¡å¼&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      map = &#x27;å…‹éš†å¤§ä½œæˆ˜&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      mechanism = &#x27;å…‹éš†æœºåˆ¶&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    default:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      map = &#x27;&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      mechanism = &#x27;&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      brreak;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return new Mode(type, map, mechanism);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// åˆ›å»ºä¸€ä¸ªå…‹éš†æ¨¡å¼</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const cloneMode = GameFactory(&#x27;å…‹éš†æ¨¡å¼&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//  ä¸€æ®µæ—¶é—´åï¼Œäº§å“ç»ç†è§‰å¾—å…‹éš†æ¨¡å¼èŠ‚å¥å¤ªæ…¢ï¼Œå†³å®šåœ¨æ¸¸æˆæœºåˆ¶ä¸­æŠŠæŠ€èƒ½å†·å´æ—¶é—´ç¼©çŸ­40%ï¼›</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// è¿™æ—¶ä½ è¦å»GameFactoryå‡½æ•°å†…ä¿®æ”¹å…‹éš†æ¨¡å¼é‡Œçš„mechanismé€»è¾‘ï¼›</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æ²¡è¿‡å¤šä¹…ï¼Œéœ€è¦åœ¨å…‹éš†æ¨¡å¼åœ°å›¾ä¸­åŠ å…¥ä¸€æ¡å“¥æ–¯æ‹‰å¢åŠ æ¸¸æˆéš¾åº¦ï¼Œè¿™æ—¶è¿˜è¦ä¿®æ”¹å¯¹åº”çš„mapé€»è¾‘;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// å‡ æ¬¡æ”¹å†™å¯¼è‡´GameFactoryæ„ˆå‘æ··ä¹±ã€è‡ƒè‚¿ï¼Œéš¾ä»¥ç»´æŠ¤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// è¿™æ—¶å€™ï¼Œå¯ä»¥æŠŠåœ°å›¾mapå’Œæ¸¸æˆæœºåˆ¶mechanismæŠ½è±¡å‡ºæ¥</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function xiaguMap() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // å¬å”¤å¸ˆå³¡è°·åœ°å›¾é€»è¾‘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function cloneMap() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // å…‹éš†å¤§ä½œæˆ˜åœ°å›¾é€»è¾‘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// åœ°å›¾å·¥å‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function MapFactory(type) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  switch (type) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case &#x27;å¬å”¤å¸ˆå³¡è°·&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return new xiaguMap();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case &#x27;å…‹éš†å¤§ä½œæˆ˜&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return new cloneMap()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function currentMechanism() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // æ™®é€šæ¨¡å¼æ¸¸æˆæœºåˆ¶é€»è¾‘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function cloneMechanism() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // å…‹éš†æ¸¸æˆæœºåˆ¶é€»è¾‘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æ¸¸æˆæœºåˆ¶å·¥å‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function MechanismFactory(type) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  switch (type) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case &#x27;æ™®é€šæ¨¡å¼&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return new currentMechanism();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case &#x27;å…‹éš†æœºåˆ¶&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return new cloneMechanism()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function GameFactory(type) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let map;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let mechanism;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  switch (type) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case &#x27;æ™®é€šåŒ¹é…&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      map = MapFactory(&#x27;å¬å”¤å¸ˆå³¡è°·&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      mechanism = MechanismFactory(&#x27;æ™®é€šæ¨¡å¼&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case &#x27;å…‹éš†æ¨¡å¼&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      map = MapFactory(&#x27;å…‹éš†å¤§ä½œæˆ˜&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      mechanism = MechanismFactory(&#x27;å…‹éš†æœºåˆ¶&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    default:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      map = &#x27;&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      mechanism = &#x27;&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      brreak;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return new Mode(type, map, mechanism);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// å¥½æ™¯ä¸é•¿ï¼Œäº§å“ç»ç†è§‰å¾—æ–°å¹´è¦æ–°å‡ºä¸€ä¸ªä¸´æ—¶æ¨¡å¼ï¼Œå«é£å‡æ¨¡å¼ï¼Œåœ°å›¾ç”¨æ–°å¹´é›ªäººåœ°å›¾ï¼Œæ¸¸æˆæœºåˆ¶å…¨æ”¹åŠ¨;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// è¿™æ—¶æˆ‘ä»¬ä¸å¾—ä¸ä¿®æ”¹GameFactoryä¸­çš„é€»è¾‘ï¼Œæ–°å¢typeå±æ€§ï¼Œå†æ–°å†™ä¸€å¥—é€»è¾‘è¿›å»ï¼Œè€Œä¸”æ¸¸æ–°å¹´ç»“æŸåï¼Œè¿˜è¦æ”¹å›å»;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// è¿™ç§å¯¹â€œå·²å»ºå·¥å‚â€çš„ä¿®æ”¹è¿åäº†å¼€æ”¾å°é—­åŸåˆ™ï¼ˆç±»ã€æ¨¡å—ã€å‡½æ•°å¯ä»¥æ‰©å±•ï¼Œä½†æ˜¯ä¸å¯ä¿®æ”¹çš„åŸåˆ™ï¼‰;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// å¦‚ä½•é¿å…ç›´æ¥ä¿®æ”¹å·¥å‚å†…éƒ¨çš„é€»è¾‘å‘¢ï¼Ÿ</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// éƒé—·çš„ä½ ä¸­åˆåƒå®Œé¥­å‡ºå»è·ŸåŒäº‹ä¾ƒå¤§å±±æ—¶ä»Javaé‚£å“¥ä»¬è®²çš„çš„æŠ½è±¡ç±»ä¸­è·å–äº†çµæ„Ÿï¼Œå†³å®šå†™â€œæŠ½è±¡å·¥å‚â€å’Œâ€æŠ½è±¡äº§å“</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class GameFactory {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  createMap() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    throw new Error(&quot;æŠ½è±¡å·¥å‚æ–¹æ³•ä¸å…è®¸ç›´æ¥è°ƒç”¨ï¼Œä½ éœ€è¦å°†æˆ‘è¦†å†™ï¼&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  createMechanism() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    throw new Error(&quot;æŠ½è±¡å·¥å‚æ–¹æ³•ä¸å…è®¸ç›´æ¥è°ƒç”¨ï¼Œä½ éœ€è¦å°†æˆ‘è¦†å†™ï¼&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Map {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  init() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    throw new Error(&quot;æŠ½è±¡å·¥å‚æ–¹æ³•ä¸å…è®¸ç›´æ¥è°ƒç”¨ï¼Œä½ éœ€è¦å°†æˆ‘è¦†å†™ï¼&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Mechanism {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  init() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    throw new Error(&quot;æŠ½è±¡å·¥å‚æ–¹æ³•ä¸å…è®¸ç›´æ¥è°ƒç”¨ï¼Œä½ éœ€è¦å°†æˆ‘è¦†å†™ï¼&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æ–°å»ºä¸€ä¸ªé™å®šæ´»åŠ¨é£å‡æ¨¡å¼</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class FlyMap extends Map {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  init() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // é£å‡æ¨¡å¼é€»è¾‘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// é£å‡æ¨¡å¼æœºåˆ¶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class FlyMechansims extends Mechansims {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  init() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // é£å‡æ¨¡å¼æœºåˆ¶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// é£å‡æ¨¡å¼</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class FlyModeFactory extends GameFactory {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  createMap() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return new FlyMap();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  createMechansims() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return new FlyMechansims();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æ–°å¢ä¸€ä¸ªé£å‡æ¨¡å¼</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const FlyMode = new FlyModeFactory();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æ€»ç»“:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// GameFactoryï¼ŒæŠ½è±¡å·¥å‚ï¼šå£°æ˜æœ€ç»ˆç›®æ ‡äº§å“çš„å…±æ€§ã€è§„èŒƒ</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// FlyModeFactoryï¼Œå…·ä½“å·¥å‚ï¼šç»§æ‰¿è‡ªæŠ½è±¡å·¥å‚ï¼Œå®ç°äº†æŠ½è±¡å·¥å‚é‡Œå£°æ˜çš„é‚£äº›æ–¹æ³•ï¼Œç”¨äºå®ä¾‹åŒ–æœ€ç»ˆç›®æ ‡äº§å“</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Mapï¼ŒMechanismï¼ŒæŠ½è±¡äº§å“ï¼šå…·ä½“å·¥å‚é‡Œå®ç°çš„æ–¹æ³•ï¼Œä¼šä¾èµ–ä¸€äº›äº§å“ï¼ŒæŠ½è±¡äº§å“å£°æ˜è¿™äº›äº§å“çš„å…±æ€§ã€è§„èŒƒ</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// FlyMapï¼ŒFlyMechansimsï¼Œå…·ä½“äº§å“ï¼šè§æŠ½è±¡äº§å“</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="åˆ›å»ºå‹---å•ä¾‹æ¨¡å¼"></a>åˆ›å»ºå‹ - å•ä¾‹æ¨¡å¼<a class="hash-link" href="#åˆ›å»ºå‹---å•ä¾‹æ¨¡å¼" title="Direct link to heading">#</a></h3><p>å•ä¾‹æ¨¡å¼æƒ³è¦åšåˆ°çš„æ˜¯ï¼Œä¸ç®¡æˆ‘ä»¬å°è¯•å»åˆ›å»ºå¤šå°‘æ¬¡ï¼Œå®ƒéƒ½åªç»™ä½ è¿”å›ç¬¬ä¸€æ¬¡æ‰€åˆ›å»ºçš„é‚£å”¯ä¸€çš„ä¸€ä¸ªå®ä¾‹ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æ¸¸æˆä¸­ç©å®¶åœ¨çœ‹tabé¢æ¿èƒ½çœ‹åˆ°æ¯ä¸ªäººçš„å‡ºè£…ï¼Œä½¿ç”¨`es6 class`åˆ›å»ºå•ä¾‹æ¨¡å¼</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class GameInfo {};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const player1 = new GameInfo();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const player2 = new GameInfo();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// ç©å®¶ä¹‹é—´ä¸èƒ½å…±ç”¨ä¿¡æ¯</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">console.log(player1 === player2) // false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// é€šè¿‡GameInfo.instanceè·å–åŒä¸€å¯¹è±¡</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class GameInfo {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  static getInstance() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(!GameInfo.instance) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      GameInfo.instance = new GameInfo();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return GameInfo.instance;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const player3 = GameInfo.getInstance();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const player4 = GameInfo.getInstance();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// å¯ä»¥å…±äº«ä¿¡æ¯</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">console.log(player3 === player4) // true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// vuexç”¨åˆ°äº†å•ä¾‹æ¨¡å¼</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// é—­åŒ…å®ç°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">SingleDog.getInstance = (function() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // å®šä¹‰è‡ªç”±å˜é‡instanceï¼Œæ¨¡æ‹Ÿç§æœ‰å˜é‡</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let instance = null</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return function() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // åˆ¤æ–­è‡ªç”±å˜é‡æ˜¯å¦ä¸ºnull</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(!instance) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      // å¦‚æœä¸ºnullåˆ™newå‡ºå”¯ä¸€å®ä¾‹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      instance = new SingleDog()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return instance</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">})()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>æˆ‘çš„ç†è§£å•ä¾‹æ¨¡å¼å°±æ˜¯å…±äº«ä¸€å—å†…å­˜ï¼Œnew ä¸€ä¸ªå®ä¾‹ä¸ä¼šå†å¼€è¾Ÿæ–°å†…å­˜ã€‚</p><p>é¢è¯•é¢˜ï¼šå®ç°ä¸€ä¸ªå…¨å±€å”¯ä¸€å¼¹çª—</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// é—­åŒ…</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">let Modal = (function() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let modal = null;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return function() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (!modal) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      modal = document.createElement(&quot;div&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      modal.innerHTML = &quot;this is modal!&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      modal.style.display = &quot;none&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      modal.id = &quot;modal&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      document.body.appendChild(modal);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return modal;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">})();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">document.getElementById(&quot;open&quot;).addEventListener(&quot;click&quot;, () =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let modal = new Modal();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  modal.style.display = &quot;block&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">document.getElementById(&quot;close&quot;).addEventListener(&quot;click&quot;, () =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let modal = new Modal();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  modal.style.display = &quot;none&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// classç±»</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Modal {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  constructor() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.dom = null;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (!Modal.instance) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      this.dom = document.createElement(&quot;div&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      this.dom.innerHTML = &quot;this is modal&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      this.dom.id = &quot;modal&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      this.dom.style.display = &quot;none&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      this.dom.show = this.show.bind(this);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      this.dom.hide = this.hide.bind(this);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      document.body.appendChild(this.dom);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      Modal.instance = this.dom;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return Modal.instance;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  show() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.dom.style.display = &quot;block&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  hide() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.dom.style.display = &quot;none&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const btnShow = document.getElementById(&quot;open&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const btnHide = document.getElementById(&quot;close&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">btnShow.addEventListener(&quot;click&quot;, () =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let modal = new Modal();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  modal.show();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">btnHide.addEventListener(&quot;click&quot;, () =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let modal = new Modal();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  modal.hide();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="åˆ›å»ºå‹---åŸå‹æ¨¡å¼"></a>åˆ›å»ºå‹ - åŸå‹æ¨¡å¼<a class="hash-link" href="#åˆ›å»ºå‹---åŸå‹æ¨¡å¼" title="Direct link to heading">#</a></h3><p>åŸå‹æ¨¡å¼ä¸ä»…æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒè¿˜æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼ˆprogramming paradigmï¼‰ï¼Œæ˜¯ JavaScript é¢å‘å¯¹è±¡ç³»ç»Ÿå®ç°çš„æ ¹åŸºã€‚</p><p>åŸå‹ç¼–ç¨‹èŒƒå¼çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯åˆ©ç”¨å®ä¾‹æ¥æè¿°å¯¹è±¡ï¼Œç”¨å®ä¾‹ä½œä¸ºå®šä¹‰å¯¹è±¡å’Œç»§æ‰¿çš„åŸºç¡€ã€‚åœ¨ JavaScript ä¸­ï¼ŒåŸå‹ç¼–ç¨‹èŒƒå¼çš„ä½“ç°å°±æ˜¯åŸºäºåŸå‹é“¾çš„ç»§æ‰¿ã€‚è¿™å…¶ä¸­ï¼Œå¯¹åŸå‹ã€åŸå‹é“¾çš„ç†è§£æ˜¯å…³é”®ã€‚</p><blockquote><p>ECMAScript 2015 ä¸­å¼•å…¥çš„ JavaScript ç±»å®è´¨ä¸Šæ˜¯ JavaScript ç°æœ‰çš„åŸºäºåŸå‹çš„ç»§æ‰¿çš„è¯­æ³•ç³–ã€‚ç±»è¯­æ³•ä¸ä¼šä¸º JavaScript å¼•å…¥æ–°çš„é¢å‘å¯¹è±¡çš„ç»§æ‰¿æ¨¡å‹ã€‚ â€”â€”MDN</p></blockquote><p>åœ¨ JavaScript ä¸­ï¼Œæ¯ä¸ªæ„é€ å‡½æ•°éƒ½æ‹¥æœ‰ä¸€ä¸ª prototype å±æ€§ï¼Œå®ƒæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œè¿™ä¸ªåŸå‹å¯¹è±¡ä¸­æœ‰ä¸€ä¸ª construtor å±æ€§æŒ‡å›æ„é€ å‡½æ•°ï¼›æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ª<strong>proto</strong>å±æ€§ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨æ„é€ å‡½æ•°å»åˆ›å»ºå®ä¾‹æ—¶ï¼Œå®ä¾‹çš„<strong>proto</strong>å±æ€§å°±ä¼šæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// åˆ›å»ºä¸€ä¸ªDogæ„é€ å‡½æ•°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function Dog(name, age) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.name = name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.age = age</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dog.prototype.eat = function() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  console.log(&#x27;è‚‰éª¨å¤´çœŸå¥½åƒ&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// ä½¿ç”¨Dogæ„é€ å‡½æ•°åˆ›å»ºdogå®ä¾‹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const dog = new Dog(&#x27;æ—ºè´¢&#x27;, 3)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>å®ç°ä¸€ä¸ªæ·±æ‹·è´</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æ–¹æ³•ä¸€ï¼Œç¼ºç‚¹æ˜¯æ²¡æ³•æ‹·è´å‡½æ•°å’Œæ­£åˆ™</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function deepClone(obj) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let str = JSON.stringify(obj);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return JSON.parse(str);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æ–¹æ³•äºŒï¼Œä½¿ç”¨é€’å½’ï¼ŒåŸç†å±‚é¢å®ç°æ·±æ‹·è´</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function deepClone(obj) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // å¦‚æœæ˜¯å€¼ç±»å‹æˆ– nullï¼Œåˆ™ç›´æ¥return</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if(typeof obj !== &#x27;object&#x27; || obj === null) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return obj;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // å®šä¹‰ç»“æœå¯¹è±¡</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let copy = {};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // å¦‚æœå¯¹è±¡æ˜¯æ•°ç»„ï¼Œåˆ™å®šä¹‰ç»“æœæ•°ç»„</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if(obj.constructor === Array) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    copy = [];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // éå†å¯¹è±¡çš„key</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  for(let key in obj) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // å¦‚æœkeyæ˜¯å¯¹è±¡çš„è‡ªæœ‰å±æ€§</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(obj.hasOwnProperty(key)) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      // é€’å½’è°ƒç”¨æ·±æ‹·è´æ–¹æ³•</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      copy[key] = deepClone(obj[key]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return copy;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ç»“æ„å‹---è£…é¥°å™¨æ¨¡å¼"></a>ç»“æ„å‹ - è£…é¥°å™¨æ¨¡å¼<a class="hash-link" href="#ç»“æ„å‹---è£…é¥°å™¨æ¨¡å¼" title="Direct link to heading">#</a></h3><p>è£…é¥°å™¨æ¨¡å¼ï¼Œåˆåè£…é¥°è€…æ¨¡å¼ã€‚å®ƒçš„å®šä¹‰æ˜¯â€œåœ¨ä¸æ”¹å˜åŸå¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡å¯¹å…¶è¿›è¡ŒåŒ…è£…æ‹“å±•ï¼Œä½¿åŸæœ‰å¯¹è±¡å¯ä»¥æ»¡è¶³ç”¨æˆ·çš„æ›´å¤æ‚éœ€æ±‚â€ã€‚</p><p>åœ¨ ES7 ä¸­ï¼Œé€šè¿‡ä¸€ä¸ª@è¯­æ³•ç³–è½»æ¾åœ°ç»™ä¸€ä¸ªç±»è£…ä¸Šè£…é¥°å™¨</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">function classDecorator(target) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target.hasDecorator = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return target</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// å°†è£…é¥°å™¨â€œå®‰è£…â€åˆ°Buttonç±»ä¸Š</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@classDecorator</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Button {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Buttonç±»çš„ç›¸å…³é€»è¾‘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>React ä¸­çš„è£…é¥°å™¨ï¼šHOC</p><blockquote><p>é«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸”è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚</p></blockquote><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import React, { Component } from &#x27;react&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const BorderHoc = WrappedComponent =&gt; class extends Component {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  render() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return &lt;div style={{ border: &#x27;solid 1px red&#x27; }}&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;WrappedComponent /&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/div&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">export default borderHoc</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>è£…é¥°ç›®æ ‡ç»„ä»¶</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import React, { Component } from &#x27;react&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import BorderHoc from &#x27;./BorderHoc&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// ç”¨BorderHocè£…é¥°ç›®æ ‡ç»„ä»¶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@BorderHoc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class TargetComponent extends React.Component {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  render() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // ç›®æ ‡ç»„ä»¶å…·ä½“çš„ä¸šåŠ¡é€»è¾‘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// exportå‡ºå»çš„å…¶å®æ˜¯ä¸€ä¸ªè¢«åŒ…è£¹åçš„ç»„ä»¶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">export default TargetComponent</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ç»“æ„å‹---é€‚é…å™¨æ¨¡å¼"></a>ç»“æ„å‹ - é€‚é…å™¨æ¨¡å¼<a class="hash-link" href="#ç»“æ„å‹---é€‚é…å™¨æ¨¡å¼" title="Direct link to heading">#</a></h3><blockquote><p>é€‚é…å™¨æ¨¡å¼é€šè¿‡æŠŠä¸€ä¸ªç±»çš„æ¥å£å˜æ¢æˆå®¢æˆ·ç«¯æ‰€æœŸå¾…çš„å¦ä¸€ç§æ¥å£ï¼Œå¯ä»¥å¸®æˆ‘ä»¬è§£å†³ä¸å…¼å®¹çš„é—®é¢˜ã€‚ä¸å½±å“ç°æœ‰å®ç°æ–¹å¼ï¼Œå…¼å®¹è°ƒç”¨æ—§æ¥å£çš„ä»£ç </p></blockquote><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// ä½ å†™äº†ä¸ªæ–°çš„æ”»å‡»ç‰¹æ•ˆ</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function newSpecial(params) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // ä¸šåŠ¡é€»è¾‘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æ—§çš„æ”»å‡»ç‰¹æ•ˆ</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function oldSpecial(params) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // ä¸šåŠ¡é€»è¾‘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// äº§å“ç»ç†è®©ä½ å‡çº§ä¸€ä¸‹ï¼Œæ›¿æ¢æ‰æ—§çš„æ”»å‡»ç‰¹æ•ˆï¼Œäºæ˜¯å†™äº†ä¸ªé€‚é…å™¨</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function Apatar(params) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  newSpecial(params);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function oldSpecial(params) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Apatar(params);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// é€‚é…å™¨ç±»ä¼¼äºè½¬æ¢å™¨, ç±»ä¼¼ä¸€ç§å¯ä»¥ç»™å®‰å“å’Œè‹¹æœç³»ç»Ÿå……ç”µçš„æ‰‹æœºè½¬æ¢æ¥å¤´ã€‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ç»“æ„å‹---ä»£ç†æ¨¡å¼"></a>ç»“æ„å‹ - ä»£ç†æ¨¡å¼<a class="hash-link" href="#ç»“æ„å‹---ä»£ç†æ¨¡å¼" title="Direct link to heading">#</a></h3><p>ä»£ç†æ¨¡å¼ï¼Œå¼å¦‚å…¶åâ€”â€”åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå‡ºäºç§ç§è€ƒè™‘/é™åˆ¶ï¼Œä¸€ä¸ªå¯¹è±¡ä¸èƒ½ç›´æ¥è®¿é—®å¦ä¸€ä¸ªå¯¹è±¡ï¼Œéœ€è¦ä¸€ä¸ªç¬¬ä¸‰è€…ï¼ˆä»£ç†ï¼‰ç‰µçº¿æ­æ¡¥ä»è€Œé—´æ¥è¾¾åˆ°è®¿é—®ç›®çš„ï¼Œè¿™æ ·çš„æ¨¡å¼å°±æ˜¯ä»£ç†æ¨¡å¼ã€‚</p><blockquote><p>æœ€å¸¸è§çš„å››ç§ä»£ç†ç±»å‹ï¼šäº‹ä»¶ä»£ç†ã€è™šæ‹Ÿä»£ç†ã€ç¼“å­˜ä»£ç†å’Œä¿æŠ¤ä»£ç†</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="äº‹ä»¶ä»£ç†"></a>äº‹ä»¶ä»£ç†<a class="hash-link" href="#äº‹ä»¶ä»£ç†" title="Direct link to heading">#</a></h4><p>å…¶ä»–ä¸‰ç§æ¨¡å¼å‚ç…§ä¿®è¨€å¤§ä½¬çš„æ˜é‡‘å°å†Œä¸­æœ‰è¯¦ç»†ä»‹ç»ã€‚æ—¶é—´ä»£ç†å¯èƒ½æ˜¯ä»£ç†æ¨¡å¼æœ€å¸¸è§çš„ä¸€ç§åº”ç”¨æ–¹å¼ï¼Œå®ƒçš„åœºæ™¯æ˜¯ä¸€ä¸ªçˆ¶å…ƒç´ ä¸‹æœ‰å¤šä¸ªå­å…ƒç´ ï¼Œåƒè¿™æ ·ï¼š</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;!DOCTYPE html&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;html lang=&quot;en&quot;&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;head&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;title&gt;äº‹ä»¶ä»£ç†&lt;/title&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/head&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;body&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div id=&quot;father&quot;&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;a href=&quot;#&quot;&gt;é“¾æ¥1å·&lt;/a&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;a href=&quot;#&quot;&gt;é“¾æ¥2å·&lt;/a&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;a href=&quot;#&quot;&gt;é“¾æ¥3å·&lt;/a&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;a href=&quot;#&quot;&gt;é“¾æ¥4å·&lt;/a&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;a href=&quot;#&quot;&gt;é“¾æ¥5å·&lt;/a&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;a href=&quot;#&quot;&gt;é“¾æ¥6å·&lt;/a&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/body&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/html&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>æˆ‘ä»¬ç°åœ¨çš„éœ€æ±‚æ˜¯ï¼Œå¸Œæœ›é¼ æ ‡ç‚¹å‡»æ¯ä¸ª a æ ‡ç­¾ï¼Œéƒ½å¯ä»¥å¼¹å‡ºâ€œæˆ‘æ˜¯ xxxâ€è¿™æ ·çš„æç¤ºã€‚æ¯”å¦‚ç‚¹å‡»ç¬¬ä¸€ä¸ª a æ ‡ç­¾ï¼Œå¼¹å‡ºâ€œæˆ‘æ˜¯é“¾æ¥ 1 å·â€è¿™æ ·çš„æç¤ºã€‚è¿™æ„å‘³ç€æˆ‘ä»¬è‡³å°‘è¦å®‰è£… 6 ä¸ªç›‘å¬å‡½æ•°ç»™ 6 ä¸ªä¸åŒçš„çš„å…ƒç´ (ä¸€èˆ¬æˆ‘ä»¬ä¼šç”¨å¾ªç¯ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼‰ï¼Œå¦‚æœæˆ‘ä»¬çš„ a æ ‡ç­¾è¿›ä¸€æ­¥å¢å¤šï¼Œé‚£ä¹ˆæ€§èƒ½çš„å¼€é”€ä¼šæ›´å¤§ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// å‡å¦‚ä¸ç”¨ä»£ç†æ¨¡å¼ï¼Œæˆ‘ä»¬å°†å¾ªç¯å®‰è£…ç›‘å¬å‡½æ•°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const aNodes = document.getElementById(&#x27;father&#x27;).getElementsByTagName(&#x27;a&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const aLength = aNodes.length</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">for(let i=0;i&lt;aLength;i++) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    aNodes[i].addEventListener(&#x27;click&#x27;, function(e) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        e.preventDefault()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        alert(`æˆ‘æ˜¯${aNodes[i].innerText}`)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// è€ƒè™‘åˆ°äº‹ä»¶æœ¬èº«å…·æœ‰â€œå†’æ³¡â€çš„ç‰¹æ€§ï¼Œå½“æˆ‘ä»¬ç‚¹å‡» a å…ƒç´ æ—¶ï¼Œç‚¹å‡»äº‹ä»¶ä¼šâ€œå†’æ³¡â€åˆ°çˆ¶å…ƒç´  div ä¸Šï¼Œä»è€Œè¢«ç›‘å¬åˆ°ã€‚å®ƒå¯ä»¥å¾ˆå¤§ç¨‹åº¦ä¸Šæé«˜æˆ‘ä»¬ä»£ç çš„æ€§èƒ½ã€‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// è·å–çˆ¶å…ƒç´ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const father = document.getElementById(&#x27;father&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// ç»™çˆ¶å…ƒç´ å®‰è£…ä¸€æ¬¡ç›‘å¬å‡½æ•°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">father.addEventListener(&#x27;click&#x27;, function(e) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // è¯†åˆ«æ˜¯å¦æ˜¯ç›®æ ‡å­å…ƒç´ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(e.target.tagName === &#x27;A&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // ä»¥ä¸‹æ˜¯ç›‘å¬å‡½æ•°çš„å‡½æ•°ä½“</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        e.preventDefault()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        alert(`æˆ‘æ˜¯${e.target.innerText}`)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="è¡Œä¸ºå‹---ç­–ç•¥æ¨¡å¼"></a>è¡Œä¸ºå‹ - ç­–ç•¥æ¨¡å¼<a class="hash-link" href="#è¡Œä¸ºå‹---ç­–ç•¥æ¨¡å¼" title="Direct link to heading">#</a></h3><blockquote><p>å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•,æŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥, å¹¶ä¸”ä½¿å®ƒä»¬å¯ç›¸äº’æ›¿æ¢ã€‚</p></blockquote><p>ç»ˆäºåˆ°äº†æˆ‘æœ€å–œæ¬¢çš„æ¨¡å¼äº†ï¼Œè¿™ä¸ªæ¨¡å¼éå¸¸å®ç”¨ï¼Œåœ¨å†™ä¸šåŠ¡é€»è¾‘ä¸­ç»å¸¸é‡åˆ°ã€‚<strong>åŒæ—¶åšæŒå¼€æ”¾å°é—­æ”¹é€ ï¼Œå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­</strong></p><p>ä¿®è¨€å¤§ç¥ç»™å‡ºçš„ç»å…¸æ¡ˆä¾‹ã€Šè¯¢ä»·ç­–ç•¥ã€‹
éœ€æ±‚æè¿°:
å½“ä»·æ ¼ç±»å‹ä¸ºâ€œé¢„å”®ä»·â€æ—¶ï¼Œæ»¡ 100 - 20ï¼Œä¸æ»¡ 100 æ‰“ 9 æŠ˜</p><p>å½“ä»·æ ¼ç±»å‹ä¸ºâ€œå¤§ä¿ƒä»·â€æ—¶ï¼Œæ»¡ 100 - 30ï¼Œä¸æ»¡ 100 æ‰“ 8 æŠ˜</p><p>å½“ä»·æ ¼ç±»å‹ä¸ºâ€œè¿”åœºä»·â€æ—¶ï¼Œæ»¡ 200 - 50ï¼Œä¸å åŠ </p><p>å½“ä»·æ ¼ç±»å‹ä¸ºâ€œå°é²œä»·â€æ—¶ï¼Œç›´æ¥æ‰“ 5 æŠ˜</p><p>ä»–é¦–å…ˆå°†å››ç§ä»·æ ¼åšäº†æ ‡ç­¾åŒ–ï¼š</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">é¢„å”®ä»· - pre</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">å¤§ä¿ƒä»· - onSale</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">è¿”åœºä»· - back</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">å°é²œä»· - fresh</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ä½¿ç”¨ if-else ï¼Œè½»æ¾æå®š</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// è¯¢ä»·æ–¹æ³•ï¼Œæ¥å—ä»·æ ¼æ ‡ç­¾å’ŒåŸä»·ä¸ºå…¥å‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function askPrice(tag, originPrice) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // å¤„ç†é¢„çƒ­ä»·</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if(tag === &#x27;pre&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(originPrice &gt;= 100) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return originPrice - 20</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return originPrice * 0.9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // å¤„ç†å¤§ä¿ƒä»·</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if(tag === &#x27;onSale&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(originPrice &gt;= 100) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return originPrice - 30</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return originPrice * 0.8</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // å¤„ç†è¿”åœºä»·</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if(tag === &#x27;back&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(originPrice &gt;= 200) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return originPrice - 50</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return originPrice</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // å¤„ç†å°é²œä»·</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if(tag === &#x27;fresh&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     return originPrice * 0.5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ç¼ºç‚¹ï¼š 1.è¿èƒŒäº†â€œå•ä¸€åŠŸèƒ½â€åŸåˆ™ã€‚ä¸€ä¸ª function é‡Œé¢ï¼Œå®ƒç«Ÿç„¶å¤„ç†äº†å››å¨é€»è¾‘ã€‚ 2.è¿èƒŒäº†â€œå¼€æ”¾å°é—­â€åŸåˆ™ã€‚å‡å¦‚å¢åŠ ä¸€ä¸ªæ»¡ 100 - 50 çš„â€œæ–°äººä»·â€æ€ä¹ˆåŠï¼Ÿä»–åªèƒ½ç»§ç»­ if-else,ç”±äºæ”¹åŠ¨äº†è¯¢ä»·å‡½æ•°ï¼Œéœ€æµ‹è¯•é‡æ–°å›å½’æµ‹è¯•ã€‚</p><p>è§£å†³åŠæ³•ï¼šä½¿ç”¨å¯¹è±¡æ˜ å°„ï¼ŒåŒæ—¶éµå¾ªå•ä¸€åŠŸèƒ½å’Œå¼€æ”¾å°é—­åŸåˆ™</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// å®šä¹‰ä¸€ä¸ªè¯¢ä»·å¤„ç†å™¨å¯¹è±¡</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const priceProcessor = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  pre(originPrice) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (originPrice &gt;= 100) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return originPrice - 20;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return originPrice * 0.9;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  onSale(originPrice) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (originPrice &gt;= 100) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return originPrice - 30;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return originPrice * 0.8;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  back(originPrice) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (originPrice &gt;= 200) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      return originPrice - 50;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return originPrice;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fresh(originPrice) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return originPrice * 0.5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// å½“æˆ‘ä»¬æƒ³ä½¿ç”¨å…¶ä¸­æŸä¸ªè¯¢ä»·ç®—æ³•çš„æ—¶å€™ï¼šé€šè¿‡æ ‡ç­¾åå»å®šä½å°±å¥½äº†</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// è¯¢ä»·å‡½æ•°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function askPrice(tag, originPrice) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return priceProcessor[tag](originPrice)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>å‡å¦‚æ–°å¢ä¸€ä¸ªæ¡ä»¶ æ–°äººæ»¡ 100 è¿” 50</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">priceProcessor.newUser = function (originPrice) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if (originPrice &gt;= 100) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return originPrice - 50;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return originPrice;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="è¡Œä¸ºå‹---çŠ¶æ€æ¨¡å¼"></a>è¡Œä¸ºå‹ - çŠ¶æ€æ¨¡å¼<a class="hash-link" href="#è¡Œä¸ºå‹---çŠ¶æ€æ¨¡å¼" title="Direct link to heading">#</a></h3><p>çŠ¶æ€æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼ç›¸ä¼¼ï¼Œä½†çŠ¶æ€æ¨¡å¼å¼ºè°ƒäº†ç±»çš„æ¦‚å¿µ</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// å³æŠŠå¤„ç†è¿‡ç¨‹æ”¾åœ¨å¤„ç†å¯¹è±¡æœ¬èº«ä¸­</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class CoffeeMaker {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  constructor() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.state = &quot;init&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.stock = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      coffee: 500,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      milk: 200,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  changeState(state) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.state = state;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.changeStateProcessor[state]();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  changeStateProcessor = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    that: this,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    coffee() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      console.log(&quot;å’–å•¡æœºç°åœ¨çš„å’–å•¡å­˜å‚¨é‡æ˜¯:&quot;, this.that.stock.coffee);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      console.log(&quot;æˆ‘åªåé»‘å’–å•¡&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    latte() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      this.coffee();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      console.log(&quot;å’–å•¡æœºç°åœ¨çš„å’–å•¡å­˜å‚¨é‡æ˜¯:&quot;, this.that.stock.milk);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      console.log(&quot;åŠ ç‚¹å¥¶&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    vanillaLatte() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      this.latte();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      console.log(&quot;å†åŠ é¦™è‰ç³–æµ†&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    mocha() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      this.latte();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      console.log(&quot;å†åŠ å·§å…‹åŠ›&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æµ‹è¯•ä¸€ä¸‹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const coffeeMaker = new CoffeeMaker();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">coffeeMaker.changeState(&quot;latte&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="è¡Œä¸ºå‹---è§‚å¯Ÿè€…æ¨¡å¼"></a>è¡Œä¸ºå‹ - è§‚å¯Ÿè€…æ¨¡å¼<a class="hash-link" href="#è¡Œä¸ºå‹---è§‚å¯Ÿè€…æ¨¡å¼" title="Direct link to heading">#</a></h3><blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªç›®æ ‡å¯¹è±¡ï¼Œå½“è¿™ä¸ªç›®æ ‡å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°ã€‚</p></blockquote><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// è§‚å¯Ÿè€…è®¢é˜…å‘å¸ƒè€…ï¼Œå‘å¸ƒè€…èƒ½ç¾¤é€šçŸ¥è§‚å¯Ÿè€…ä»¬</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Publisher {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  constructor() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.observers = [];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  addObserver(observer) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.observers.push(observer);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  removeObserver(observer) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.observers.forEach((item, index) =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      if (item === observer) this.observers.splice(index, 1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  notifyObersers() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.observers.forEach((item) =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      item.update(this);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Observer {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  update(publisher) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // æ›´æ–°æ“ä½œ</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// åœ¨ä¸Šé¢ä¸¤ä¸ªç±»ä¸­æ‰©å±•å‡ºå…·ä½“çš„ç±», æ¸¸æˆä¸­æ‰€æœ‰ç©å®¶è®¾æœ‰æé†’æœºåˆ¶ï¼Œå¦‚å¤§é¾™æ­»äº¡é€šçŸ¥æ‰€æœ‰ç©å®¶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class DragonPublisher extends Publisher {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  constructor() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    super();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.state = null;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.observers = [];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  getState() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return this.state;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  setState(state) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.state = state;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.notifyObersers();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class PlayerObserver extends Observer {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  constructor(id) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    super();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.id = id;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.state = null;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  update(publisher) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.state = publisher.getState();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.remind();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  remind() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(`æ¥æ”¶ä¿¡æ¯ ${this.state}ï¼Œå·´æ‹‰å·´æ‹‰`);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// æµ‹è¯•ä¸€ä¸‹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const Dragon = new DragonPublisher();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const player1 = new PlayerObserver(&quot;#01&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const player2 = new PlayerObserver(&quot;#02&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dragon.addObserver(player1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dragon.addObserver(player2);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dragon.setState(&quot;å¤§é¾™å·²è¢«å‡»æ€&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="è¡Œä¸ºå‹---å‘å¸ƒè®¢é˜…æ¨¡å¼"></a>è¡Œä¸ºå‹ - å‘å¸ƒâ€”â€”è®¢é˜…æ¨¡å¼<a class="hash-link" href="#è¡Œä¸ºå‹---å‘å¸ƒè®¢é˜…æ¨¡å¼" title="Direct link to heading">#</a></h3><p>è§‚å¯Ÿè€…æ¨¡å¼ï¼šå‘å¸ƒè€…ç›´æ¥æ¥è§¦è®¢é˜…è€…ï¼›å‘å¸ƒâ€”â€”è®¢é˜…æ¨¡å¼ï¼šå‘å¸ƒè€…å’Œè®¢é˜…è€…é€šè¿‡ä¸­é—´å¹³å°é—´æ¥æ¥è§¦, å‘å¸ƒè€…æ— æ³•æ„ŸçŸ¥è®¢é˜…è€…</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class EventEmitter {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  constructor() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.handlers = {};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  on(event, callback) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (!this.handlers[event]) this.handlers[event] = [];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.handlers[event].push(callback);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // ç§»é™¤æŸä¸ªäº‹ä»¶å›è°ƒé˜Ÿåˆ—é‡Œçš„æŒ‡å®šå›è°ƒå‡½æ•°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  off(event, callback) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    const callbacks = this.handlers[event],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      index = callbacks.indexOf(callback);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (index !== -1) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      callbacks.splice(index, 1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // è§¦å‘ç›®æ ‡äº‹ä»¶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  emit(event, ...params) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (this.handlers[event]) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      this.handlers[event].forEach((callback) =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        callback(...params);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // ä¸ºäº‹ä»¶æ³¨å†Œå•æ¬¡ç›‘å¬å™¨</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  once(event, callback) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // å¯¹å›è°ƒå‡½æ•°è¿›è¡ŒåŒ…è£…ï¼Œä½¿å…¶æ‰§è¡Œå®Œæ¯•è‡ªåŠ¨è¢«ç§»é™¤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    const wrapper = (...params) =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      callback(...params);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      this.off(event, wrapper);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.on(event, wrapper);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>å‚è€ƒæ–‡æ¡£ï¼šæ˜é‡‘å°å†Œ-<a href="https://juejin.im/book/5c70fc83518825428d7f9dfb/section/5c70fc845188256282697b96" target="_blank" rel="noopener noreferrer">ã€ŠJavaScript è®¾è®¡æ¨¡å¼æ ¸â¼¼åŸç†ä¸åº”â½¤å®è·µã€‹-ä¿®è¨€</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/javascript/design.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/javascript/webpack"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« ä½¿ç”¨webpack</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/typescript/ts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Typescriptä½¿ç”¨æ€»ç»“ Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#åˆ›å»ºå‹---æ„é€ å™¨æ¨¡å¼" class="table-of-contents__link">åˆ›å»ºå‹ - æ„é€ å™¨æ¨¡å¼</a></li><li><a href="#åˆ›å»ºå‹---ç®€å•å·¥å‚æ¨¡å¼" class="table-of-contents__link">åˆ›å»ºå‹ - ç®€å•å·¥å‚æ¨¡å¼</a></li><li><a href="#åˆ›å»ºå‹---æŠ½è±¡å·¥å‚æ¨¡å¼" class="table-of-contents__link">åˆ›å»ºå‹ - æŠ½è±¡å·¥å‚æ¨¡å¼</a></li><li><a href="#åˆ›å»ºå‹---å•ä¾‹æ¨¡å¼" class="table-of-contents__link">åˆ›å»ºå‹ - å•ä¾‹æ¨¡å¼</a></li><li><a href="#åˆ›å»ºå‹---åŸå‹æ¨¡å¼" class="table-of-contents__link">åˆ›å»ºå‹ - åŸå‹æ¨¡å¼</a></li><li><a href="#ç»“æ„å‹---è£…é¥°å™¨æ¨¡å¼" class="table-of-contents__link">ç»“æ„å‹ - è£…é¥°å™¨æ¨¡å¼</a></li><li><a href="#ç»“æ„å‹---é€‚é…å™¨æ¨¡å¼" class="table-of-contents__link">ç»“æ„å‹ - é€‚é…å™¨æ¨¡å¼</a></li><li><a href="#ç»“æ„å‹---ä»£ç†æ¨¡å¼" class="table-of-contents__link">ç»“æ„å‹ - ä»£ç†æ¨¡å¼</a></li><li><a href="#è¡Œä¸ºå‹---ç­–ç•¥æ¨¡å¼" class="table-of-contents__link">è¡Œä¸ºå‹ - ç­–ç•¥æ¨¡å¼</a></li><li><a href="#è¡Œä¸ºå‹---çŠ¶æ€æ¨¡å¼" class="table-of-contents__link">è¡Œä¸ºå‹ - çŠ¶æ€æ¨¡å¼</a></li><li><a href="#è¡Œä¸ºå‹---è§‚å¯Ÿè€…æ¨¡å¼" class="table-of-contents__link">è¡Œä¸ºå‹ - è§‚å¯Ÿè€…æ¨¡å¼</a></li><li><a href="#è¡Œä¸ºå‹---å‘å¸ƒè®¢é˜…æ¨¡å¼" class="table-of-contents__link">è¡Œä¸ºå‹ - å‘å¸ƒâ€”â€”è®¢é˜…æ¨¡å¼</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.2e3526c0.js"></script>
<script src="/runtime~main.b2ec19b9.js"></script>
<script src="/main.47aef0ab.js"></script>
<script src="/1.043bfae5.js"></script>
<script src="/2.43a1a627.js"></script>
<script src="/33.bd4e36e7.js"></script>
<script src="/34.9a26ead1.js"></script>
<script src="/f976f453.2cdaa488.js"></script>
<script src="/17896441.e2a3b6ae.js"></script>
<script src="/101703e8.5bca6b43.js"></script>
</body>
</html>